{{- $scope := default "homepage" .Scope -}}
{{- $context := .Context -}}

<aside class="sidebar right-sidebar sticky">
    {{ partial "sidebar/side-header.html" $context }}

    {{- with (index $context.Site.Params.widgets $scope) -}}
        {{ range $widget := . }}
            {{ if templates.Exists (printf "partials/widget/%s.html" .type) }}
                {{ partial (printf "widget/%s" .type) (dict "Context" $context "Params" .params) }}
            {{ else }}
                {{ warnf "Widget %s not found" .type }}
            {{ end }}
        {{ end }}
    {{ end }}

    {{ partial "sidebar/side-menus.html" $context }}
</aside>